# 字句構造 — 補足情報

本ドキュメントは [字句構造（言語仕様）](../reference/lexical-structure.md) の補足情報です。

---

## 設計根拠

### ドキュメンテーションコメントの優先順位

処理系は `inner_doc`（`//!`）/ `outer_doc`（`///`）を `line_comment` より優先して認識します。

| 種類 | 構文 | 用途 |
| :--- | :--- | :--- |
| Inner doc | `//!` | モジュール（ファイル）先頭のドキュメント |
| Outer doc | `///` | 宣言・定義・ノード呼び出し等に付与 |

### 浮動小数点リテラルの優先順位

`float` は `integer` より優先してトークン化されます。
例: `123.456` は `float` として認識（`123` + `.` + `456` ではない）。

### 記号と演算子の構文位置

`?`（Nullable）や `<=`（上限付き型）などは、字句的には記号列として現れますが、
どの構文位置で出現可能かは [構文](../reference/syntax.md) で規定します。

---

## 必須サポート

### 文字列エスケープシーケンス

処理系は、少なくとも次のエスケープシーケンスをサポートしなければなりません。

| 表記         | 意味                          |
| :----------- | :---------------------------- |
| `\"`         | ダブルクオート                |
| `\\`         | バックスラッシュ              |
| `\n`         | LF (`0x0A`)                   |
| `\r`         | CR (`0x0D`)                   |
| `\t`         | TAB (`0x09`)                  |
| `\0`         | NUL (`0x00`)                  |
| `\b`         | BS (`0x08`)                   |
| `\f`         | FF (`0x0C`)                   |
| `\u{XXXX}`   | Unicode スカラ値（1〜6桁16進数） |

### 空白文字

`\s` の具体的な集合は処理系依存ですが、少なくとも ASCII の空白を含みます:
- SP (0x20)
- TAB (0x09)
- LF (0x0A)
- CR (0x0D)

---

## 実装定義事項

| 事項 | 説明 |
| :--- | :--- |
| 未知のエスケープシーケンス | `\q` 等の扱いは実装定義 |
| 空白文字セット | `\s` の具体的な集合は処理系依存 |

---

## 未規定事項（TBD）

| 事項 | 説明 |
| :--- | :--- |
| 将来の予約語 | 現時点では別途規定しない |
| 生識別子 | `r#type` のような形式は未サポート |
